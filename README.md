# Markdown

# Сценарий доставки пиццы


**Создано:** _Ekaterina Kisselyova_
**Дата:** _Февр. 03, 2021_

1. После того как заказ отправлен **Системой** на **Производство** на сайте открывается (системой) страница “Статус заказа”, на которой **Покупатель** может видеть номер заказа и его текущий статус. Если **Покупатель** зарегистрировался и имеет личный кабинет (персональные данные в кабинете заполнены из интерфейса формы заказа), то он может видеть статус текущего заказа и историю по предыдущим заказам. Если он не зарегистрировался, то данные видны на временной странице статуса заказа. На странице, помимо данных заказа (количество и цены товара), есть кнопка “Обновить статус”, при нажатии на которую система запрашивает текущий статус заказа.

2. По мере готовности пиццы **Комплектовщик/кассир**, который собирает и распределяет заказы, обновляет статус в _r-keeper/Axapta_ на “Готов”. При передачи пиццы **Курьеру**, **Комплектовщик/кассир** обновляет статус на “Передан в доставку”, а также вручает **Курьеру** чек со статусом оплаты. Изменение статуса служит триггером для обновления данных на форме “Статус заказа” и для отправки СМС с одноименным статусом на телефон, указанный в заказе (интеграция с сервисом отправки СМС от Мегафон, МТС, и т.п.).

3. **Курьер** по мере приближения к адресу **Покупателя** за 10 минут отправляет СМС со статусом  заказа “Готов к вручению”, затем непосредственно вручает пиццу **Покупателю** по назначенному адресу. 

4. **Покупатель** производит оплату наличными или картой **Курьеру** (если не оплатил заказ на сайте).

5. **Курьер**, доставив и получив оплату заказ, отправляет стандартный СМС об успешной доставке, что служит триггером для закрытия заказа и для отправки **Покупателю** СМС с предложением оценить работу **Курьера** по шкале от _1_ до _5_. **Покупатель**, при желании, отправляет ответный СМС с цифрой. Также, **Покупатель** имеет возможность поставить оценку за доставку в Личном кабинете на сайте. 
